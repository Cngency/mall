<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.scoprion.mall.wx.mapper.WxActivityMapper">

    <resultMap type="com.scoprion.mall.domain.Activity" id="act">
        <id property="id" column="id"/>
        <result property="name" column="name"/>
        <result property="status" column="status"/>
        <result property="activityType" column="activityType"/>
        <result property="createDate" column="createDate"/>
        <result property="updateDate" column="updateDate"/>
        <result property="target" column="target"/>
        <collection property="activityGoodsList" resultMap="com.scoprion.mall.wx.mapper.WxActivityMapper" />
    </resultMap>

    <resultMap type="com.scoprion.mall.domain.ActivityGoods" id="actGoods">
        <id property="id" column="id"/>
        <result property="activityId" column="activity"/>
        <result property="goodName" column="goodName"/>
        <result property="goodId" column="goodId"/>
        <result property="createDate" column="createDate"/>
    </resultMap>

    <!-- 抢购拼团 -->
    <select id="group" resultMap="actGoods">
        SELECT
        act.id,
        act.name,
        act.activityType,
        act.status,
        act.createDate,
        act.updateDate,
        act.target,
        actg.id,
        actg.activityId,
        actg.goodId,
        actg.goodName,
        actg.createDate
        FROM t_activity act, t_activity_good actg
        WHERE act.id=actg.id
        AND activityType='1'
    </select>

</mapper>