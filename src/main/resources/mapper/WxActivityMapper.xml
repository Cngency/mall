<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.scoprion.mall.wx.mapper.WxActivityMapper">

    <resultMap type="com.scoprion.mall.domain.ActivityGoods" id="activityResult" extends="goods">
        <result property="activityType" column="activityType"/>
        <result property="name" column="name"/>
        <result property="activityId" column="activityId"/>
        <result property="status" column="status"/>
    </resultMap>

    <resultMap type="com.scoprion.mall.domain.Goods" id="goods">
        <result property="id" column="id"/>
        <result property="categoryId" column="categoryId"/>
        <result property="goodName" column="goodName"/>
        <result property="description" column="description"/>
        <result property="promotion" column="promotion"/>
        <result property="price" column="price"/>
    </resultMap>


    <!-- 抢购拼团 -->
    <select id="group" resultMap="activityResult">
        SELECT
        act.name,
        act.activityType,
        act.status,
        act.createDate,
        act.updateDate,
        act.target,
        actg.id,
        actg.activityId,
        actg.goodId,
        tg.goodName,
        actg.createDate,
        tg.promotion
        FROM t_activity act LEFT JOIN t_activity_good actg ON act.id=actg.activityId
        LEFT JOIN t_good tg ON actg.goodId=tg.id
        AND act.activityType='1'
    </select>

</mapper>