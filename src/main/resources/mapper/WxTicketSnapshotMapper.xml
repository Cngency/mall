<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.scoprion.mall.wx.mapper.WxTicketSnapshotMapper">

    <!--新增-->
    <insert id="add" parameterType="com.scoprion.mall.domain.TicketSnapshot">
       INSERT INTO t_ticket_snapshot
        (ticketName,content,startDate,endDate,money,num,status,createDate,ticketNo,type,useRange,numLimit)
        VALUES
        (#{ticketName},#{content},#{startDate},#{endDate},#{money},#{num},#{status},now(),#{ticketNo}
        ,#{type},#{useRange},#{numLimit})
    </insert>

    <!--查询详情-->
    <select id="findById" resultType="com.scoprion.mall.domain.TicketSnapshot">
        SELECT
        id,
        ticketName,
        content,
        startDate,
        endDate,
        money,
        num,
        status,
        createDate,
        ticketNo,
        type,
        useRange,
        numLimit
        FROM  t_ticket_snapshot WHERE id=#{id}
    </select>

    <!--修改-->
    <update id="update" parameterType="com.scoprion.mall.domain.TicketSnapshot">
        UPDATE t_ticket_snapshot SET
        <if test="ticketNo!=null and ticketNo!=''">ticketNo=#{ticketNo},</if>
        <if test="ticketName!=null and ticketName!=''">ticketName=#{ticketName},</if>
        <if test="type!=null and type!=''">type=#{type},</if>
        <if test="content!=null and content!=''">content=#{content},</if>
        <if test="startDate!=null and startDate!=''">startDate=#{startDate},</if>
        <if test="endDate!=null and endDate!=''">endDate=#{endDate},</if>
        <if test="createDate!=null and createDate!=''">createDate=#{createDate},</if>
        <if test="money!=null and money!=''">money=#{money},</if>
        <if test="num!=null and num!=''">num=#{num},</if>
        <if test="status!=null and status!=''">status=#{status},</if>
        <if test="useRange!=null and useRange!=''">useRange=#{useRange},</if>
        <if test="numLimit!=null and numLimit!=''">numLimit=#{numLimit},</if>
        updateDate=now()
        where id=#{id}
    </update>

    <!--修改状态-->
    <update id="modifyStatus" parameterType="com.scoprion.mall.domain.TicketSnapshot">
        UPDATE t_ticket_snapshot SET
        <if test="status!=null and status!=''">status=#{status},</if>
        updateDate=now()
        where id=#{id}
    </update>

</mapper>